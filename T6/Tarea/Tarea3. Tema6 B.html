<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarea2. T6</title>
</head>
<body>
    <script>
        // Clase Articulo que representa un artículo en la cesta
        class Articulo {
            constructor(codigo, nombre, precio, cantidad) {
                this.codigo = codigo;
                this.nombre = nombre;
                this.precio = precio;
                this.cantidad = cantidad;
            }

            // Método para calcular el subtotal de un artículo
            calcularSubtotal() {
                return this.precio * this.cantidad;
            }
        }

        // Clase Cesta que gestiona la cesta de compras
        class Cesta {
            constructor() {
                this.articulos = [];
            }

            // Método para introducir un artículo en la cesta
            introducirArticulo() {
                let nombre = prompt("Introduzca el nombre del artículo");
                let precio = parseFloat(prompt("Introduzca el precio del artículo"));

                if (isNaN(precio)) {
                    alert("El precio debe ser un valor numérico.");
                    return;
                }

                let cantidad = parseInt(prompt("Introduzca la cantidad del artículo"));

                if (isNaN(cantidad)) {
                    alert("La cantidad debe ser un valor numérico.");
                    return;
                }

                let siguienteCodigo = this.articulos.length + 1;

                let nuevoArticulo = new Articulo(siguienteCodigo, nombre, precio, cantidad);
                this.articulos.push(nuevoArticulo);
            }

            // Método para ver los artículos en la cesta
            verCesta() {
                if (this.articulos.length === 0) {
                    alert("La cesta está vacía.");
                    return;
                }

                let tabla = "Cod.\tNombre\tPrecio\tCantidad\tSubtotal\n";
                let total = 0;

                for (let i = 0; i < this.articulos.length; i++) {
                    let articulo = this.articulos[i];
                    let subtotal = articulo.calcularSubtotal();
                    total += subtotal;

                    tabla += `${articulo.codigo}\t${articulo.nombre}\t${articulo.precio}\t${articulo.cantidad}\t${subtotal}\n`;
                }

                tabla += `Total\t\t\t\t${total.toFixed(2)}`;
                alert(tabla);
            }

            // Método para borrar un artículo de la cesta
            borrarArticulo() {
                let codigo = prompt("Introduzca el código del artículo a borrar");
                for (let i = 0; i < this.articulos.length; i++) {
                    if (this.articulos[i].codigo == codigo) {
                        this.articulos.splice(i, 1);
                        alert("Artículo eliminado de la cesta.");
                        return;
                    }
                }
                alert("Artículo no encontrado en la cesta.");
            }

            // Método para vaciar la cesta
            vaciarCesta() {
                this.articulos = [];
                alert("La cesta ha sido vaciada.");
            }
        }

        // Función para mostrar el menú
        function mostrarMenu() {
            let cesta = new Cesta();
            let opcion;

            do {
                opcion = prompt("Menú:\n1. Ver cesta\n2. Insertar un artículo\n3. Borrar un artículo\n4. Vaciar cesta\n5. Salir\nIngrese su opción:");

                switch (opcion) {
                    case "1":
                        cesta.verCesta();
                        break;
                    case "2":
                        cesta.introducirArticulo();
                        break;
                    case "3":
                        cesta.borrarArticulo();
                        break;
                    case "4":
                        cesta.vaciarCesta();
                        break;
                    case "5":
                        alert("Gracias por usar la aplicación.");
                        break;
                    default:
                        alert("Opción no válida. Inténtelo de nuevo.");
                }
            } while (opcion !== "5");
        }

        // Iniciar la función mostrarMenu al abrir la página
        mostrarMenu();
    </script>
</body>
</html>
